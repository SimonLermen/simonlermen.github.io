---
layout: post
title:  "SVD on Decision Transformers"
date:   2023-01-18 16:07:10 +0000
categories: Interpretability
---

This post is still an early draft

SVD can be applied to the OV circuit and MLP weights of a transformer for interpretability. [In the case of LLMs the resulting singular vectors frequently appear to be semantically interpretable by taking the cosine similarity to the vectors of the output token embedding](https://www.lesswrong.com/posts/mkbGjzxD8d8XqKHzA/the-singular-value-decompositions-of-transformer-weight). Decision transformers have a similar architecture but use action, state, reward and time embeddings. There are usually also separate output embeddings for action and state. By measuring the cosine similarity of different weight singular vectors to the different embeddings, it can be shown how different weights attend to different inputs and which outputs they produce. Just like in the original post from Conjecture, I have looked at the SVD of the [OV-circuit](https://transformer-circuits.pub/2021/framework/index.html) and of the first (K) and second (V) layer of the MLP.

Since this post is looking at many different embeddings, the embedding vectors have been normalized to make them more comparable. All of the results show the inner product of two 128-dimensional length 1 vectors.
            
## SVD for Searching the Origin of Actions

SVD on the K weights of the MLP compared to the Action Output Embedding. In comparison, the cosine similarity was much greater for the K weights than for any other part of the neural network. I have also tried to edit the weights of the transformer MLP by setting one of the singular vectors equal to [1, 1, ...] / 128. Editing the K values seems to have a very significant effect on the performance of the agent. On the other hand the effects appears much smaller for the V values.
<html>
<iframe width="560" height="315" src="https://www.youtube.com/embed/I81Q-ixYZ24" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</html>


The K weights are the weights of the first Linear layer in the MLP of a transformer Block. Similar to the findings in gpt2, the first singular vector seems to correspond with the most common output actions.


 <html lang="en">
        <head>
            <meta charset="utf-8">
            <title>TopKTable</title>
            
            <script>/*! For license information please see loader.js.LICENSE.txt */
var loader;loader=(()=>{var __webpack_modules__={907:module=>{"use strict";module.exports=function iota(n){for(var result=new Array(n),i=0;i<n;++i)result[i]=i;return result}},738:module=>{function isBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}module.exports=function(obj){return null!=obj&&(isBuffer(obj)||function isSlowBuffer(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isBuffer(obj.slice(0,0))}(obj)||!!obj._isBuffer)}},861:(module,__unused_webpack_exports,__webpack_require__)=>{var iota=__webpack_require__(907),isBuffer=__webpack_require__(738),hasTypedArrays="undefined"!=typeof Float64Array;function compare1st(a,b){return a[0]-b[0]}function order(){var i,stride=this.stride,terms=new Array(stride.length);for(i=0;i<terms.length;++i)terms[i]=[Math.abs(stride[i]),i];terms.sort(compare1st);var result=new Array(terms.length);for(i=0;i<result.length;++i)result[i]=terms[i][1];return result}function compileConstructor(dtype,dimension){var className=["View",dimension,"d",dtype].join("");dimension<0&&(className="View_Nil"+dtype);var useGetters="generic"===dtype;if(-1===dimension){var code="function "+className+"(a){this.data=a;};var proto="+className+".prototype;proto.dtype='"+dtype+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+className+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+className+"(a){return new "+className+"(a);}";return new Function(code)()}if(0===dimension){code="function "+className+"(a,d) {this.data = a;this.offset = d};var proto="+className+".prototype;proto.dtype='"+dtype+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+className+"_copy() {return new "+className+"(this.data,this.offset)};proto.pick=function "+className+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+className+"_get(){return "+(useGetters?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+className+"_set(v){return "+(useGetters?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+className+"(a,b,c,d){return new "+className+"(a,d)}";return new Function("TrivialArray",code)(CACHED_CONSTRUCTORS[dtype][0])}code=["'use strict'"];var indices=iota(dimension),args=indices.map((function(i){return"i"+i})),index_str="this.offset+"+indices.map((function(i){return"this.stride["+i+"]*i"+i})).join("+"),shapeArg=indices.map((function(i){return"b"+i})).join(","),strideArg=indices.map((function(i){return"c"+i})).join(",");code.push("function "+className+"(a,"+shapeArg+","+strideArg+",d){this.data=a","this.shape=["+shapeArg+"]","this.stride=["+strideArg+"]","this.offset=d|0}","var proto="+className+".prototype","proto.dtype='"+dtype+"'","proto.dimension="+dimension),code.push("Object.defineProperty(proto,'size',{get:function "+className+"_size(){return "+indices.map((function(i){return"this.shape["+i+"]"})).join("*"),"}})"),1===dimension?code.push("proto.order=[0]"):(code.push("Object.defineProperty(proto,'order',{get:"),dimension<4?(code.push("function "+className+"_order(){"),2===dimension?code.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===dimension&&code.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):code.push("ORDER})")),code.push("proto.set=function "+className+"_set("+args.join(",")+",v){"),useGetters?code.push("return this.data.set("+index_str+",v)}"):code.push("return this.data["+index_str+"]=v}"),code.push("proto.get=function "+className+"_get("+args.join(",")+"){"),useGetters?code.push("return this.data.get("+index_str+")}"):code.push("return this.data["+index_str+"]}"),code.push("proto.index=function "+className+"_index(",args.join(),"){return "+index_str+"}"),code.push("proto.hi=function "+className+"_hi("+args.join(",")+"){return new "+className+"(this.data,"+indices.map((function(i){return["(typeof i",i,"!=='number'||i",i,"<0)?this.shape[",i,"]:i",i,"|0"].join("")})).join(",")+","+indices.map((function(i){return"this.stride["+i+"]"})).join(",")+",this.offset)}");var a_vars=indices.map((function(i){return"a"+i+"=this.shape["+i+"]"})),c_vars=indices.map((function(i){return"c"+i+"=this.stride["+i+"]"}));code.push("proto.lo=function "+className+"_lo("+args.join(",")+"){var b=this.offset,d=0,"+a_vars.join(",")+","+c_vars.join(","));for(var i=0;i<dimension;++i)code.push("if(typeof i"+i+"==='number'&&i"+i+">=0){d=i"+i+"|0;b+=c"+i+"*d;a"+i+"-=d}");code.push("return new "+className+"(this.data,"+indices.map((function(i){return"a"+i})).join(",")+","+indices.map((function(i){return"c"+i})).join(",")+",b)}"),code.push("proto.step=function "+className+"_step("+args.join(",")+"){var "+indices.map((function(i){return"a"+i+"=this.shape["+i+"]"})).join(",")+","+indices.map((function(i){return"b"+i+"=this.stride["+i+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(i=0;i<dimension;++i)code.push("if(typeof i"+i+"==='number'){d=i"+i+"|0;if(d<0){c+=b"+i+"*(a"+i+"-1);a"+i+"=ceil(-a"+i+"/d)}else{a"+i+"=ceil(a"+i+"/d)}b"+i+"*=d}");code.push("return new "+className+"(this.data,"+indices.map((function(i){return"a"+i})).join(",")+","+indices.map((function(i){return"b"+i})).join(",")+",c)}");var tShape=new Array(dimension),tStride=new Array(dimension);for(i=0;i<dimension;++i)tShape[i]="a[i"+i+"]",tStride[i]="b[i"+i+"]";code.push("proto.transpose=function "+className+"_transpose("+args+"){"+args.map((function(n,idx){return n+"=("+n+"===undefined?"+idx+":"+n+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+className+"(this.data,"+tShape.join(",")+","+tStride.join(",")+",this.offset)}"),code.push("proto.pick=function "+className+"_pick("+args+"){var a=[],b=[],c=this.offset");for(i=0;i<dimension;++i)code.push("if(typeof i"+i+"==='number'&&i"+i+">=0){c=(c+this.stride["+i+"]*i"+i+")|0}else{a.push(this.shape["+i+"]);b.push(this.stride["+i+"])}");return code.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),code.push("return function construct_"+className+"(data,shape,stride,offset){return new "+className+"(data,"+indices.map((function(i){return"shape["+i+"]"})).join(",")+","+indices.map((function(i){return"stride["+i+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",code.join("\n"))(CACHED_CONSTRUCTORS[dtype],order)}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};module.exports=function wrappedNDArrayCtor(data,shape,stride,offset){if(void 0===data)return(0,CACHED_CONSTRUCTORS.array[0])([]);"number"==typeof data&&(data=[data]),void 0===shape&&(shape=[data.length]);var d=shape.length;if(void 0===stride){stride=new Array(d);for(var i=d-1,sz=1;i>=0;--i)stride[i]=sz,sz*=shape[i]}if(void 0===offset){offset=0;for(i=0;i<d;++i)stride[i]<0&&(offset-=(shape[i]-1)*stride[i])}for(var dtype=function arrayDType(data){if(isBuffer(data))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(data)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(data)?"array":"generic"}(data),ctor_list=CACHED_CONSTRUCTORS[dtype];ctor_list.length<=d+1;)ctor_list.push(compileConstructor(dtype,ctor_list.length-1));return(0,ctor_list[d+1])(data,shape,stride,offset)}},829:(__unused_webpack_module,exports)=>{"use strict";function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)(c=b[d]).enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}exports.g=function fromArrayBuffer(a){if(!a instanceof ArrayBuffer)throw new Error("Argument must be an ArrayBuffer.");var b=new DataViewReader(a),c=b.readUint8(),d=b.readAndASCIIDecodeBytes(5);if(147!=c||"NUMPY"!=d)throw new Error('unknown file type: "'.concat(c).concat(d,'"'));var e,f=b.readUint8(),h=(b.readUint8(),10+(e=1>=f?b.readUint16(!0):b.readUint32(!0)));0!=h%16&&console.warn("NPY file header is incorrectly padded. (".concat(h," is not evenly divisible by 16.)"));var j=function parseHeaderStr(a){var b=a.toLowerCase().replace("(","[").replace("),","]").replace("[,","[1,]").replace(",]",",1]").replace(/'/g,'"');return JSON.parse(b)}(b.readAndASCIIDecodeBytes(e));if(j.fortran_order)throw new Error("NPY file is written in Fortran byte order, support for this byte order is not yet implemented.");return{data:new(typedArrayConstructorForDescription(j.descr))(a,b.offset),shape:j.shape}};var DataViewReader=function(){function a(b){(function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),b instanceof DataView?this.dataView=b:b instanceof ArrayBuffer&&(this.dataView=new DataView(b)),this.offset=0}return function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(a,[{key:"readBytes",value:function c(a){var b=new DataView(this.dataView.buffer,this.offset,a);return this.offset+=a,b}},{key:"readAndASCIIDecodeBytes",value:function c(a){var b=new Uint8Array(this.dataView.buffer,this.offset,a);return this.offset+=a,this._decodeASCIIByteArray(b)}},{key:"readUint8",value:function c(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],b=this.dataView.getUint8(this.offset,a);return this.offset+=Uint8Array.BYTES_PER_ELEMENT,b}},{key:"readUint16",value:function c(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],b=this.dataView.getUint16(this.offset,a);return this.offset+=Uint16Array.BYTES_PER_ELEMENT,b}},{key:"readUint32",value:function c(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],b=this.dataView.getUint32(this.offset,a);return this.offset+=Uint32Array.BYTES_PER_ELEMENT,b}},{key:"_decodeASCIIByteArray",value:function k(a){var b=String.fromCharCode,c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var j=b(g.value);c.push(j)}}catch(a){e=!0,f=a}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c.join("")}}]),a}();function typedArrayConstructorForDescription(a){switch(a){case"|u1":return Uint8Array;case"<u2":return Uint16Array;case"<u4":return Uint32Array;case"<u8":throw new Error("Because JavaScript doesn't currently include standard support for 64-bit unsigned integer values, support for this dtype is not yet implemented.");case"|i1":return Int8Array;case"<i2":return Int16Array;case"<i4":return Int32Array;case"<i8":throw new Error("Because JavaScript doesn't currently include standard support for 64-bit integer values, support for this dtype is not yet implemented.");case"<f2":throw new Error("Because JavaScript doesn't currently include standard support for 16-bit floating point values, support for this dtype is not yet implemented.");case"<f4":return Float32Array;case"<f8":return Float64Array;default:throw new Error("Unknown or not yet implemented numpy dtype description: "+dtype)}}},843:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const zlib_inflate=__webpack_require__(948),utils=__webpack_require__(236),strings=__webpack_require__(373),msg=__webpack_require__(898),ZStream=__webpack_require__(292),GZheader=__webpack_require__(401),toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=__webpack_require__(619);function Inflate(options){this.options=utils.assign({chunkSize:65536,windowBits:15,to:""},options||{});const opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,0===opt.windowBits&&(opt.windowBits=-15)),!(opt.windowBits>=0&&opt.windowBits<16)||options&&options.windowBits||(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&0==(15&opt.windowBits)&&(opt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;let status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==Z_OK)throw new Error(msg[status]);if(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),opt.dictionary&&("string"==typeof opt.dictionary?opt.dictionary=strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)&&(opt.dictionary=new Uint8Array(opt.dictionary)),opt.raw&&(status=zlib_inflate.inflateSetDictionary(this.strm,opt.dictionary),status!==Z_OK)))throw new Error(msg[status])}function inflate(input,options){const inflator=new Inflate(options);if(inflator.push(input),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}Inflate.prototype.push=function(data,flush_mode){const strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary;let status,_flush_mode,last_avail_out;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:!0===flush_mode?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===toString.call(data)?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;){for(0===strm.avail_out&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=zlib_inflate.inflate(strm,_flush_mode),status===Z_NEED_DICT&&dictionary&&(status=zlib_inflate.inflateSetDictionary(strm,dictionary),status===Z_OK?status=zlib_inflate.inflate(strm,_flush_mode):status===Z_DATA_ERROR&&(status=Z_NEED_DICT));strm.avail_in>0&&status===Z_STREAM_END&&strm.state.wrap>0&&0!==data[strm.next_in];)zlib_inflate.inflateReset(strm),status=zlib_inflate.inflate(strm,_flush_mode);switch(status){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(status),this.ended=!0,!1}if(last_avail_out=strm.avail_out,strm.next_out&&(0===strm.avail_out||status===Z_STREAM_END))if("string"===this.options.to){let next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8);strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&strm.output.set(strm.output.subarray(next_out_utf8,next_out_utf8+tail),0),this.onData(utf8str)}else this.onData(strm.output.length===strm.next_out?strm.output:strm.output.subarray(0,strm.next_out));if(status!==Z_OK||0!==last_avail_out){if(status===Z_STREAM_END)return status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,!0;if(0===strm.avail_in)break}}return!0},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},module.exports.rr=inflate,__webpack_require__(619)},236:module=>{"use strict";const _has=(obj,key)=>Object.prototype.hasOwnProperty.call(obj,key);module.exports.assign=function(obj){const sources=Array.prototype.slice.call(arguments,1);for(;sources.length;){const source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(const p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},module.exports.flattenChunks=chunks=>{let len=0;for(let i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;const result=new Uint8Array(len);for(let i=0,pos=0,l=chunks.length;i<l;i++){let chunk=chunks[i];result.set(chunk,pos),pos+=chunk.length}return result}},373:module=>{"use strict";let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,module.exports.string2buf=str=>{let buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),56320==(64512&c2)&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new Uint8Array(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),55296==(64512&c)&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),56320==(64512&c2)&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf};module.exports.buf2string=(buf,max)=>{let i,out;const len=max||buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;){let c=buf[i++];if(c<128){utf16buf[out++]=c;continue}let c_len=_utf8len[c];if(c_len>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|1023&c)}}return((buf,len)=>{if(len<65534&&buf.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,buf.length===len?buf:buf.subarray(0,len));let result="";for(let i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result})(utf16buf,out)},module.exports.utf8border=(buf,max)=>{(max=max||buf.length)>buf.length&&(max=buf.length);let pos=max-1;for(;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}},69:module=>{"use strict";module.exports=(adler,buf,len,pos)=>{let s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;for(;0!==len;){n=len>2e3?2e3:len,len-=n;do{s1=s1+buf[pos++]|0,s2=s2+s1|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}},619:module=>{"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},869:module=>{"use strict";const crcTable=new Uint32Array((()=>{let c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table})());module.exports=(crc,buf,len,pos)=>{const t=crcTable,end=pos+len;crc^=-1;for(let i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}},401:module=>{"use strict";module.exports=function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},264:module=>{"use strict";module.exports=function inflate_fast(strm,start){let _in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;const state=strm.state;_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,0===op)output[_out++]=65535&here;else{if(!(16&op)){if(0==(64&op)){here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}if(32&op){state.mode=12;break top}strm.msg="invalid literal/length code",state.mode=30;break top}len=65535&here,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,!(16&op)){if(0==(64&op)){here=dcode[(65535&here)+(hold&(1<<op)-1)];continue dodist}strm.msg="invalid distance code",state.mode=30;break top}if(dist=65535&here,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg="invalid distance too far back",state.mode=30;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){op=wnext,len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits}},948:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const adler32=__webpack_require__(69),crc32=__webpack_require__(869),inflate_fast=__webpack_require__(264),inflate_table=__webpack_require__(241),{Z_FINISH,Z_BLOCK,Z_TREES,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR,Z_BUF_ERROR,Z_DEFLATED}=__webpack_require__(619),zswap32=q=>(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24);function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateResetKeep=strm=>{if(!strm||!strm.state)return Z_STREAM_ERROR;const state=strm.state;return strm.total_in=strm.total_out=state.total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=1,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new Int32Array(852),state.distcode=state.distdyn=new Int32Array(592),state.sane=1,state.back=-1,Z_OK},inflateReset=strm=>{if(!strm||!strm.state)return Z_STREAM_ERROR;const state=strm.state;return state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)},inflateReset2=(strm,windowBits)=>{let wrap;if(!strm||!strm.state)return Z_STREAM_ERROR;const state=strm.state;return windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=1+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR:(null!==state.window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))},inflateInit2=(strm,windowBits)=>{if(!strm)return Z_STREAM_ERROR;const state=new InflateState;strm.state=state,state.window=null;const ret=inflateReset2(strm,windowBits);return ret!==Z_OK&&(strm.state=null),ret};let lenfix,distfix,virgin=!0;const fixedtables=state=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let sym=0;for(;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(1,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(2,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5},updatewindow=(strm,src,end,copy)=>{let dist;const state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new Uint8Array(state.wsize)),copy>=state.wsize?(state.window.set(src.subarray(end-state.wsize,end),0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),state.window.set(src.subarray(end-copy,end-copy+dist),state.wnext),(copy-=dist)?(state.window.set(src.subarray(end-copy,end),0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0};module.exports.inflateReset=inflateReset,module.exports.inflateReset2=inflateReset2,module.exports.inflateResetKeep=inflateResetKeep,module.exports.inflateInit=strm=>inflateInit2(strm,15),module.exports.inflateInit2=inflateInit2,module.exports.inflate=(strm,flush)=>{let state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,here=0;const hbuf=new Uint8Array(4);let opts,n;const order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!strm||!strm.state||!strm.output||!strm.input&&0!==strm.avail_in)return Z_STREAM_ERROR;state=strm.state,12===state.mode&&(state.mode=13),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case 1:if(0===state.wrap){state.mode=13;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=2;break}if(state.flags=0,state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=30;break}if((15&hold)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=30;break}if(hold>>>=4,bits-=4,len=8+(15&hold),0===state.wbits)state.wbits=len;else if(len>state.wbits){strm.msg="invalid window size",state.mode=30;break}state.dmax=1<<state.wbits,strm.adler=state.check=1,state.mode=512&hold?10:12,hold=0,bits=0;break;case 2:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(255&state.flags)!==Z_DEFLATED){strm.msg="unknown compression method",state.mode=30;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=30;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=3;case 3:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=4;case 4:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=5;case 5:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=6;case 6:if(1024&state.flags&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Uint8Array(state.head.extra_len)),state.head.extra.set(input.subarray(next,next+copy),len)),512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=7;case 7:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=8;case 8:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=9;case 9:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=30;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=12;break;case 10:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=11;case 11:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=12;case 12:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case 13:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=27;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,hold>>>=1,bits-=1,3&hold){case 0:state.mode=14;break;case 1:if(fixedtables(state),state.mode=20,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=17;break;case 3:strm.msg="invalid block type",state.mode=30}hold>>>=2,bits-=2;break;case 14:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=30;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=15,flush===Z_TREES)break inf_leave;case 15:state.mode=16;case 16:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;output.set(input.subarray(next,next+copy),put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=12;break;case 17:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),hold>>>=5,bits-=5,state.ndist=1+(31&hold),hold>>>=5,bits-=5,state.ncode=4+(15&hold),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=30;break}state.have=0,state.mode=18;case 18:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(0,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=30;break}state.have=0,state.mode=19;case 19:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=30;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(7&hold),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(127&hold),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=30;break}for(;copy--;)state.lens[state.have++]=len}}if(30===state.mode)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=30;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(1,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=30;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(2,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=30;break}if(state.mode=20,flush===Z_TREES)break inf_leave;case 20:state.mode=21;case 21:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,12===state.mode&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=26;break}if(32&here_op){state.back=-1,state.mode=12;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=30;break}state.extra=15&here_op,state.mode=22;case 22:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=23;case 23:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=65535&here,!(last_bits+here_bits<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=30;break}state.offset=here_val,state.extra=15&here_op,state.mode=24;case 24:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=30;break}state.mode=25;case 25:if(0===left)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=21);break;case 26:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=21;break;case 27:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=30;break}hold=0,bits=0}state.mode=28;case 28:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=30;break}hold=0,bits=0}state.mode=29;case 29:ret=Z_STREAM_END;break inf_leave;case 30:ret=Z_DATA_ERROR;break inf_leave;case 31:return Z_MEM_ERROR;case 32:default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<30&&(state.mode<27||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=31,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(12===state.mode?128:0)+(20===state.mode||15===state.mode?256:0),(0===_in&&0===_out||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)},module.exports.inflateEnd=strm=>{if(!strm||!strm.state)return Z_STREAM_ERROR;let state=strm.state;return state.window&&(state.window=null),strm.state=null,Z_OK},module.exports.inflateGetHeader=(strm,head)=>{if(!strm||!strm.state)return Z_STREAM_ERROR;const state=strm.state;return 0==(2&state.wrap)?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK)},module.exports.inflateSetDictionary=(strm,dictionary)=>{const dictLength=dictionary.length;let state,dictid,ret;return strm&&strm.state?(state=strm.state,0!==state.wrap&&11!==state.mode?Z_STREAM_ERROR:11===state.mode&&(dictid=1,dictid=adler32(dictid,dictionary,dictLength,0),dictid!==state.check)?Z_DATA_ERROR:(ret=updatewindow(strm,dictionary,dictLength,dictLength),ret?(state.mode=31,Z_MEM_ERROR):(state.havedict=1,Z_OK))):Z_STREAM_ERROR},module.exports.inflateInfo="pako inflate (from Nodeca project)"},241:module=>{"use strict";const lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);module.exports=(type,lens,lens_index,codes,table,table_index,work,opts)=>{const bits=opts.bits;let incr,fill,low,mask,next,end,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null,base_index=0;const count=new Uint16Array(16),offs=new Uint16Array(16);let here_bits,here_op,here_val,extra=null,extra_index=0;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=15;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=15;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(0===type||1!==max))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(0===type?(base=extra=work,end=19):1===type?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,used=1<<root,mask=used-1,1===type&&used>852||2===type&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do{fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,1===type&&used>852||2===type&&used>592)return 1;low=huff&mask,table[low]=root<<24|curr<<16|next-table_index|0}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0}},898:module=>{"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},292:module=>{"use strict";module.exports=function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},330:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var numpy_parser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(829),ndarray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(861),pako_lib_inflate__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(843);const __WEBPACK_DEFAULT_EXPORT__=loader={unpack_obj:function unpack_obj(obj){if(Array.isArray(obj)){var ret=[];for(var v of obj)ret.push(unpack_obj(v));return ret}if(obj instanceof Object){if(obj.hasOwnProperty("__type__"))return function unpack_custom_data(obj){if("npy"==obj.__type__){var uint8arr;if(window.obj=obj,obj.hasOwnProperty("zdata")){const compressed=Uint8Array.from(window.atob(obj.zdata),(c=>c.charCodeAt(0)));uint8arr=(0,pako_lib_inflate__WEBPACK_IMPORTED_MODULE_2__.rr)(compressed)}else uint8arr=Uint8Array.from(window.atob(obj.data),(c=>c.charCodeAt(0)));var arr=(0,numpy_parser__WEBPACK_IMPORTED_MODULE_0__.g)(uint8arr.buffer);if(arr=ndarray__WEBPACK_IMPORTED_MODULE_1__(arr.data,arr.shape),obj.hasOwnProperty("min")){let scale="uint8"===arr.dtype?255:65535;for(var size=1,i=0;i<arr.shape.length;i++)size*=arr.shape[i];var arr_=ndarray__WEBPACK_IMPORTED_MODULE_1__(new Float32Array(size),arr.shape);for(i=0;i<arr.data.length;i++)arr_.data[i]=obj.min+(obj.max-obj.min)*arr.data[i]/scale;return arr_}return arr}return{}}(obj);ret={};for(var k of Object.keys(obj))ret[k]=unpack_obj(obj[k]);return ret}return obj}}}},__webpack_module_cache__={};function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}return __webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__(330)})().default;</script>
<script>var TopKTable;TopKTable=(()=>{"use strict";var __webpack_modules__={590:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function noop(){}__webpack_require__.d(__webpack_exports__,{default:()=>TopKTable_svelte});function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}function is_empty(obj){return 0===Object.keys(obj).length}new Set;function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function destroy_each(iterations,detaching){for(let i=0;i<iterations.length;i+=1)iterations[i]&&iterations[i].d(detaching)}function internal_element(name){return document.createElement(name)}function internal_text(data){return document.createTextNode(data)}function space(){return internal_text(" ")}function empty(){return internal_text("")}function listen(node,event,handler,options){return node.addEventListener(event,handler,options),()=>node.removeEventListener(event,handler,options)}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}function set_data(text,data){data=""+data,text.wholeText!==data&&(text.data=data)}function set_style(node,key,value,important){node.style.setProperty(key,value,important?"important":"")}function select_option(select,value){for(let i=0;i<select.options.length;i+=1){const option=select.options[i];if(option.__value===value)return void(option.selected=!0)}}function select_value(select){const selected_option=select.querySelector(":checked")||select.options[0];return selected_option&&selected_option.__value}new Set;let current_component;function set_current_component(component){current_component=component}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(fn){render_callbacks.push(fn)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let i=0;i<dirty_components.length;i+=1){const component=dirty_components[i];set_current_component(component),update(component.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(seen_callbacks.add(callback),callback())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}const outroing=new Set;function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let SvelteElement;function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function init(component,options,instance,create_fragment,not_equal,props,dirty=[-1]){const parent_component=current_component;set_current_component(component);const prop_values=options.props||{},$$=component.$$={fragment:null,ctx:null,props,update:noop,not_equal,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(parent_component?parent_component.$$.context:[]),callbacks:blank_object(),dirty,skip_bound:!1};let ready=!1;if($$.ctx=instance?instance(component,prop_values,((i,ret,...rest)=>{const value=rest.length?rest[0]:ret;return $$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&(!$$.skip_bound&&$$.bound[i]&&$$.bound[i](value),ready&&function make_dirty(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),schedule_update(),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}(component,i)),ret})):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment&&create_fragment($$.ctx),options.target){if(options.hydrate){const nodes=function children(element){return Array.from(element.childNodes)}(options.target);$$.fragment&&$$.fragment.l(nodes),nodes.forEach(detach)}else $$.fragment&&$$.fragment.c();options.intro&&transition_in(component.$$.fragment),function mount_component(component,target,anchor){const{fragment,on_mount,on_destroy,after_update}=component.$$;fragment&&fragment.m(target,anchor),add_render_callback((()=>{const new_on_destroy=on_mount.map(run).filter(is_function);on_destroy?on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]})),after_update.forEach(add_render_callback)}(component,options.target,options.anchor),flush()}set_current_component(parent_component)}"function"==typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const key in this.$$.slotted)this.appendChild(this.$$.slotted[key])}attributeChangedCallback(attr,_oldValue,newValue){this[attr]=newValue}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}});class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){this.$$set&&!is_empty($$props)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}}function get_each_context_2(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[34]=list[i],child_ctx[32]=i,child_ctx}function get_each_context_3(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[30]=list[i],child_ctx[37]=i,child_ctx}function get_each_context_4(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[34]=list[i],child_ctx[39]=i,child_ctx}function get_each_context_5(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[34]=list[i],child_ctx[32]=i,child_ctx}function get_each_context_6(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[30]=list[i],child_ctx[37]=i,child_ctx}function get_each_context(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[30]=list[i],child_ctx[32]=i,child_ctx}function get_each_context_1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[30]=list[i],child_ctx[32]=i,child_ctx}function get_each_context_7(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[42]=list[i],child_ctx[44]=i,child_ctx}function get_each_context_8(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[42]=list[i],child_ctx[44]=i,child_ctx}function create_each_block_8(ctx){let option,t,option_value_value,t_value=ctx[42]+"";return{c(){option=internal_element("option"),t=internal_text(t_value),option.__value=option_value_value=ctx[44],option.value=option.__value},m(target,anchor){insert(target,option,anchor),append(option,t)},p(ctx,dirty){32&dirty[0]&&t_value!==(t_value=ctx[42]+"")&&set_data(t,t_value)},d(detaching){detaching&&detach(option)}}}function create_each_block_7(ctx){let option,t,option_value_value,t_value=ctx[42]+"";return{c(){option=internal_element("option"),t=internal_text(t_value),option.__value=option_value_value=ctx[44],option.value=option.__value},m(target,anchor){insert(target,option,anchor),append(option,t)},p(ctx,dirty){64&dirty[0]&&t_value!==(t_value=ctx[42]+"")&&set_data(t,t_value)},d(detaching){detaching&&detach(option)}}}function create_else_block(ctx){let t0,t1,if_block2_anchor,if_block0=(null==ctx[2]||"topk"==ctx[2])&&create_if_block_6(ctx),if_block1=null==ctx[2]&&create_if_block_5(ctx),if_block2=(null==ctx[2]||"bottomk"==ctx[2])&&create_if_block_4(ctx);return{c(){if_block0&&if_block0.c(),t0=space(),if_block1&&if_block1.c(),t1=space(),if_block2&&if_block2.c(),if_block2_anchor=empty()},m(target,anchor){if_block0&&if_block0.m(target,anchor),insert(target,t0,anchor),if_block1&&if_block1.m(target,anchor),insert(target,t1,anchor),if_block2&&if_block2.m(target,anchor),insert(target,if_block2_anchor,anchor)},p(ctx,dirty){null==ctx[2]||"topk"==ctx[2]?if_block0?if_block0.p(ctx,dirty):(if_block0=create_if_block_6(ctx),if_block0.c(),if_block0.m(t0.parentNode,t0)):if_block0&&(if_block0.d(1),if_block0=null),null==ctx[2]?if_block1?if_block1.p(ctx,dirty):(if_block1=create_if_block_5(ctx),if_block1.c(),if_block1.m(t1.parentNode,t1)):if_block1&&(if_block1.d(1),if_block1=null),null==ctx[2]||"bottomk"==ctx[2]?if_block2?if_block2.p(ctx,dirty):(if_block2=create_if_block_4(ctx),if_block2.c(),if_block2.m(if_block2_anchor.parentNode,if_block2_anchor)):if_block2&&(if_block2.d(1),if_block2=null)},d(detaching){if_block0&&if_block0.d(detaching),detaching&&detach(t0),if_block1&&if_block1.d(detaching),detaching&&detach(t1),if_block2&&if_block2.d(detaching),detaching&&detach(if_block2_anchor)}}}function create_if_block(ctx){let t0,t1,if_block2_anchor,if_block0=(null==ctx[2]||"topk"==ctx[2])&&create_if_block_3(ctx),if_block1=null==ctx[2]&&create_if_block_2(ctx),if_block2=(null==ctx[2]||"bottomk"==ctx[2])&&create_if_block_1(ctx);return{c(){if_block0&&if_block0.c(),t0=space(),if_block1&&if_block1.c(),t1=space(),if_block2&&if_block2.c(),if_block2_anchor=empty()},m(target,anchor){if_block0&&if_block0.m(target,anchor),insert(target,t0,anchor),if_block1&&if_block1.m(target,anchor),insert(target,t1,anchor),if_block2&&if_block2.m(target,anchor),insert(target,if_block2_anchor,anchor)},p(ctx,dirty){null==ctx[2]||"topk"==ctx[2]?if_block0?if_block0.p(ctx,dirty):(if_block0=create_if_block_3(ctx),if_block0.c(),if_block0.m(t0.parentNode,t0)):if_block0&&(if_block0.d(1),if_block0=null),null==ctx[2]?if_block1||(if_block1=create_if_block_2(ctx),if_block1.c(),if_block1.m(t1.parentNode,t1)):if_block1&&(if_block1.d(1),if_block1=null),null==ctx[2]||"bottomk"==ctx[2]?if_block2?if_block2.p(ctx,dirty):(if_block2=create_if_block_1(ctx),if_block2.c(),if_block2.m(if_block2_anchor.parentNode,if_block2_anchor)):if_block2&&(if_block2.d(1),if_block2=null)},d(detaching){if_block0&&if_block0.d(detaching),detaching&&detach(t0),if_block1&&if_block1.d(detaching),detaching&&detach(t1),if_block2&&if_block2.d(detaching),detaching&&detach(if_block2_anchor)}}}function create_if_block_6(ctx){let each_1_anchor,each_value_5=range(ctx[8].shape[0]),each_blocks=[];for(let i=0;i<each_value_5.length;i+=1)each_blocks[i]=create_each_block_5(get_each_context_5(ctx,each_value_5,i));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor)},p(ctx,dirty){if(115081&dirty[0]){let i;for(each_value_5=range(ctx[8].shape[0]),i=0;i<each_value_5.length;i+=1){const child_ctx=get_each_context_5(ctx,each_value_5,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_5(child_ctx),each_blocks[i].c(),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_5.length}},d(detaching){destroy_each(each_blocks,detaching),detaching&&detach(each_1_anchor)}}}function create_each_block_6(ctx){let td,t,mounted,dispose,t_value=ctx[30]+"";function mouseover_handler_2(){return ctx[25](ctx[32],ctx[37])}function mouseleave_handler_2(){return ctx[26](ctx[30])}return{c(){td=internal_element("td"),t=internal_text(t_value),attr(td,"class","token svelte-tabow6"),set_style(td,"background",ctx[16](ctx[7].get(ctx[32],ctx[0],ctx[37]))),set_style(td,"text-align","center")},m(target,anchor){insert(target,td,anchor),append(td,t),mounted||(dispose=[listen(td,"mouseover",mouseover_handler_2),listen(td,"focus",focus_handler_2),listen(td,"mouseleave",mouseleave_handler_2)],mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,265&dirty[0]&&t_value!==(t_value=ctx[30]+"")&&set_data(t,t_value),129&dirty[0]&&set_style(td,"background",ctx[16](ctx[7].get(ctx[32],ctx[0],ctx[37])))},d(detaching){detaching&&detach(td),mounted=!1,run_all(dispose)}}}function create_each_block_5(ctx){let tr,t,each_value_6=idx_into_arr_from_ndarray_slice(ctx[3],ctx[8].pick(ctx[32],ctx[0],null)),each_blocks=[];for(let i=0;i<each_value_6.length;i+=1)each_blocks[i]=create_each_block_6(get_each_context_6(ctx,each_value_6,i));return{c(){tr=internal_element("tr");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t=space(),set_style(tr,"text-align","center")},m(target,anchor){insert(target,tr,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(tr,null);append(tr,t)},p(ctx,dirty){if(115081&dirty[0]){let i;for(each_value_6=idx_into_arr_from_ndarray_slice(ctx[3],ctx[8].pick(ctx[32],ctx[0],null)),i=0;i<each_value_6.length;i+=1){const child_ctx=get_each_context_6(ctx,each_value_6,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_6(child_ctx),each_blocks[i].c(),each_blocks[i].m(tr,t))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_6.length}},d(detaching){detaching&&detach(tr),destroy_each(each_blocks,detaching)}}}function create_if_block_5(ctx){let tr,each_value_4=range(ctx[8].shape[2]),each_blocks=[];for(let i=0;i<each_value_4.length;i+=1)each_blocks[i]=create_each_block_4(get_each_context_4(ctx,each_value_4,i));return{c(){tr=internal_element("tr");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();set_style(tr,"text-align","center")},m(target,anchor){insert(target,tr,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(tr,null)},p(ctx,dirty){if(256&dirty[0]){const old_length=each_value_4.length;let i;for(each_value_4=range(ctx[8].shape[2]),i=old_length;i<each_value_4.length;i+=1){const child_ctx=get_each_context_4(ctx,each_value_4,i);each_blocks[i]||(each_blocks[i]=create_each_block_4(child_ctx),each_blocks[i].c(),each_blocks[i].m(tr,null))}for(i=each_value_4.length;i<old_length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_4.length}},d(detaching){detaching&&detach(tr),destroy_each(each_blocks,detaching)}}}function create_each_block_4(ctx){let td;return{c(){td=internal_element("td"),td.textContent="----------\r\n                        ",attr(td,"class","ellipsis svelte-tabow6"),set_style(td,"background","#FFFFFF"),set_style(td,"text-align","center")},m(target,anchor){insert(target,td,anchor)},d(detaching){detaching&&detach(td)}}}function create_if_block_4(ctx){let each_1_anchor,each_value_2=range(ctx[10].shape[0]),each_blocks=[];for(let i=0;i<each_value_2.length;i+=1)each_blocks[i]=create_each_block_2(get_each_context_2(ctx,each_value_2,i));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor)},p(ctx,dirty){if(116233&dirty[0]){let i;for(each_value_2=range(ctx[10].shape[0]),i=0;i<each_value_2.length;i+=1){const child_ctx=get_each_context_2(ctx,each_value_2,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_2(child_ctx),each_blocks[i].c(),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_2.length}},d(detaching){destroy_each(each_blocks,detaching),detaching&&detach(each_1_anchor)}}}function create_each_block_3(ctx){let td,t,mounted,dispose,t_value=ctx[30]+"";function mouseover_handler_3(){return ctx[27](ctx[32],ctx[37])}function mouseleave_handler_3(){return ctx[28](ctx[30])}return{c(){td=internal_element("td"),t=internal_text(t_value),attr(td,"class","token svelte-tabow6"),set_style(td,"background",ctx[16](ctx[9].get(ctx[32],ctx[0],ctx[37]))),set_style(td,"text-align","center")},m(target,anchor){insert(target,td,anchor),append(td,t),mounted||(dispose=[listen(td,"mouseover",mouseover_handler_3),listen(td,"focus",focus_handler_3),listen(td,"mouseleave",mouseleave_handler_3)],mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,1033&dirty[0]&&t_value!==(t_value=ctx[30]+"")&&set_data(t,t_value),513&dirty[0]&&set_style(td,"background",ctx[16](ctx[9].get(ctx[32],ctx[0],ctx[37])))},d(detaching){detaching&&detach(td),mounted=!1,run_all(dispose)}}}function create_each_block_2(ctx){let tr,t,each_value_3=idx_into_arr_from_ndarray_slice(ctx[3],ctx[10].pick(ctx[32],ctx[0],null)),each_blocks=[];for(let i=0;i<each_value_3.length;i+=1)each_blocks[i]=create_each_block_3(get_each_context_3(ctx,each_value_3,i));return{c(){tr=internal_element("tr");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t=space(),set_style(tr,"text-align","center")},m(target,anchor){insert(target,tr,anchor);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(tr,null);append(tr,t)},p(ctx,dirty){if(116233&dirty[0]){let i;for(each_value_3=idx_into_arr_from_ndarray_slice(ctx[3],ctx[10].pick(ctx[32],ctx[0],null)),i=0;i<each_value_3.length;i+=1){const child_ctx=get_each_context_3(ctx,each_value_3,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_3(child_ctx),each_blocks[i].c(),each_blocks[i].m(tr,t))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_3.length}},d(detaching){detaching&&detach(tr),destroy_each(each_blocks,detaching)}}}function create_if_block_3(ctx){let each_1_anchor,each_value_1=ctx[11],each_blocks=[];for(let i=0;i<each_value_1.length;i+=1)each_blocks[i]=create_each_block_1(get_each_context_1(ctx,each_value_1,i));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor)},p(ctx,dirty){if(116867&dirty[0]){let i;for(each_value_1=ctx[11],i=0;i<each_value_1.length;i+=1){const child_ctx=get_each_context_1(ctx,each_value_1,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_1(child_ctx),each_blocks[i].c(),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_1.length}},d(detaching){destroy_each(each_blocks,detaching),detaching&&detach(each_1_anchor)}}}function create_each_block_1(ctx){let tr,td,t,mounted,dispose,t_value=ctx[30]+"";function mouseover_handler(){return ctx[21](ctx[32])}function mouseleave_handler(){return ctx[22](ctx[30])}return{c(){tr=internal_element("tr"),td=internal_element("td"),t=internal_text(t_value),attr(td,"class","token svelte-tabow6"),set_style(td,"background",ctx[16](ctx[7].get(ctx[32],ctx[0],ctx[1]))),set_style(td,"text-align","center")},m(target,anchor){insert(target,tr,anchor),append(tr,td),append(td,t),mounted||(dispose=[listen(td,"mouseover",mouseover_handler),listen(td,"focus",focus_handler),listen(td,"mouseleave",mouseleave_handler)],mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,2048&dirty[0]&&t_value!==(t_value=ctx[30]+"")&&set_data(t,t_value),131&dirty[0]&&set_style(td,"background",ctx[16](ctx[7].get(ctx[32],ctx[0],ctx[1])))},d(detaching){detaching&&detach(tr),mounted=!1,run_all(dispose)}}}function create_if_block_2(ctx){let tr;return{c(){tr=internal_element("tr"),tr.innerHTML='<td class="ellipsis svelte-tabow6" style="background: #FFFFFF; text-align:center; font-weight: bold">...</td>'},m(target,anchor){insert(target,tr,anchor)},d(detaching){detaching&&detach(tr)}}}function create_if_block_1(ctx){let each_1_anchor,each_value=ctx[12],each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block(get_each_context(ctx,each_value,i));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor)},p(ctx,dirty){if(119299&dirty[0]){let i;for(each_value=ctx[12],i=0;i<each_value.length;i+=1){const child_ctx=get_each_context(ctx,each_value,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block(child_ctx),each_blocks[i].c(),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value.length}},d(detaching){destroy_each(each_blocks,detaching),detaching&&detach(each_1_anchor)}}}function create_each_block(ctx){let tr,td,t,mounted,dispose,t_value=ctx[30]+"";function mouseover_handler_1(){return ctx[23](ctx[32])}function mouseleave_handler_1(){return ctx[24](ctx[30])}return{c(){tr=internal_element("tr"),td=internal_element("td"),t=internal_text(t_value),attr(td,"class","token svelte-tabow6"),set_style(td,"background",ctx[16](ctx[9].get(ctx[32],ctx[0],ctx[1]))),set_style(td,"text-align","center")},m(target,anchor){insert(target,tr,anchor),append(tr,td),append(td,t),mounted||(dispose=[listen(td,"mouseover",mouseover_handler_1),listen(td,"focus",focus_handler_1),listen(td,"mouseleave",mouseleave_handler_1)],mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,4096&dirty[0]&&t_value!==(t_value=ctx[30]+"")&&set_data(t,t_value),515&dirty[0]&&set_style(td,"background",ctx[16](ctx[9].get(ctx[32],ctx[0],ctx[1])))},d(detaching){detaching&&detach(tr),mounted=!1,run_all(dispose)}}}function create_fragment(ctx){let div2,div0,label0,t1,select0,t2,label1,t3,t4,t5,select1,option0,t6,t7,label2,t9,select2,option1,t10,option2,option3,t13,div1,t14,t15,table,mounted,dispose,each_value_8=ctx[5],each_blocks_1=[];for(let i=0;i<each_value_8.length;i+=1)each_blocks_1[i]=create_each_block_8(get_each_context_8(ctx,each_value_8,i));let each_value_7=ctx[6],each_blocks=[];for(let i=0;i<each_value_7.length;i+=1)each_blocks[i]=create_each_block_7(get_each_context_7(ctx,each_value_7,i));function select_block_type(ctx,dirty){return null!=ctx[11]?create_if_block:create_else_block}let current_block_type=select_block_type(ctx),if_block=current_block_type(ctx);return{c(){div2=internal_element("div"),div0=internal_element("div"),label0=internal_element("label"),label0.textContent="Layer:",t1=space(),select0=internal_element("select");for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i].c();t2=space(),label1=internal_element("label"),t3=internal_text(ctx[4]),t4=internal_text(":"),t5=space(),select1=internal_element("select"),option0=internal_element("option"),t6=internal_text("all");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t7=space(),label2=internal_element("label"),label2.textContent="Filter:",t9=space(),select2=internal_element("select"),option1=internal_element("option"),t10=internal_text("topk+bottomk"),option2=internal_element("option"),option2.textContent="topk",option3=internal_element("option"),option3.textContent="bottomk",t13=space(),div1=internal_element("div"),t14=internal_text(ctx[13]),t15=space(),table=internal_element("table"),if_block.c(),attr(label0,"class","title svelte-tabow6"),attr(label0,"for","layer-select"),attr(select0,"id","layer-select"),attr(select0,"class","layer-select"),void 0===ctx[0]&&add_render_callback((()=>ctx[18].call(select0))),attr(label1,"class","title svelte-tabow6"),attr(label1,"for","obj-select"),option0.__value=void 0,option0.value=option0.__value,option0.selected=!0,attr(select1,"id","obj-select"),attr(select1,"class","obj-select"),void 0===ctx[1]&&add_render_callback((()=>ctx[19].call(select1))),attr(label2,"class","title svelte-tabow6"),attr(label2,"for","filter-select"),option1.__value=void 0,option1.value=option1.__value,option1.selected=!0,option2.__value="topk",option2.value=option2.__value,option2.selected=!0,option3.__value="bottomk",option3.value=option3.__value,option3.selected=!0,attr(select2,"id","filter-select"),attr(select2,"class","filter-select"),void 0===ctx[2]&&add_render_callback((()=>ctx[20].call(select2))),attr(div0,"class","objs-container"),attr(table,"class","tokens svelte-tabow6"),attr(div2,"class","container")},m(target,anchor){insert(target,div2,anchor),append(div2,div0),append(div0,label0),append(div0,t1),append(div0,select0);for(let i=0;i<each_blocks_1.length;i+=1)each_blocks_1[i].m(select0,null);select_option(select0,ctx[0]),append(div0,t2),append(div0,label1),append(label1,t3),append(label1,t4),append(div0,t5),append(div0,select1),append(select1,option0),append(option0,t6);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(select1,null);select_option(select1,ctx[1]),append(div0,t7),append(div0,label2),append(div0,t9),append(div0,select2),append(select2,option1),append(option1,t10),append(select2,option2),append(select2,option3),select_option(select2,ctx[2]),append(div2,t13),append(div2,div1),append(div1,t14),append(div2,t15),append(div2,table),if_block.m(table,null),mounted||(dispose=[listen(select0,"change",ctx[18]),listen(select1,"change",ctx[19]),listen(select2,"change",ctx[20])],mounted=!0)},p(ctx,dirty){if(32&dirty[0]){let i;for(each_value_8=ctx[5],i=0;i<each_value_8.length;i+=1){const child_ctx=get_each_context_8(ctx,each_value_8,i);each_blocks_1[i]?each_blocks_1[i].p(child_ctx,dirty):(each_blocks_1[i]=create_each_block_8(child_ctx),each_blocks_1[i].c(),each_blocks_1[i].m(select0,null))}for(;i<each_blocks_1.length;i+=1)each_blocks_1[i].d(1);each_blocks_1.length=each_value_8.length}if(1&dirty[0]&&select_option(select0,ctx[0]),16&dirty[0]&&set_data(t3,ctx[4]),64&dirty[0]){let i;for(each_value_7=ctx[6],i=0;i<each_value_7.length;i+=1){const child_ctx=get_each_context_7(ctx,each_value_7,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_7(child_ctx),each_blocks[i].c(),each_blocks[i].m(select1,null))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_7.length}2&dirty[0]&&select_option(select1,ctx[1]),4&dirty[0]&&select_option(select2,ctx[2]),8192&dirty[0]&&set_data(t14,ctx[13]),current_block_type===(current_block_type=select_block_type(ctx))&&if_block?if_block.p(ctx,dirty):(if_block.d(1),if_block=current_block_type(ctx),if_block&&(if_block.c(),if_block.m(table,null)))},i:noop,o:noop,d(detaching){detaching&&detach(div2),destroy_each(each_blocks_1,detaching),destroy_each(each_blocks,detaching),if_block.d(),mounted=!1,run_all(dispose)}}}function idx_into_arr_from_ndarray_slice(arr,ndarray_1d_slice){if(1!=ndarray_1d_slice.shape.length)return null;let sub_arr=[];for(let i=0;i<ndarray_1d_slice.shape[0];i++)sub_arr.push(arr[Math.ceil(ndarray_1d_slice.get(i))]);return sub_arr}function range(n){return[...Array(n).keys()]}function componentToHex(c){var hex=c.toString(16);return 1==hex.length?"0"+hex:hex}const focus_handler=()=>{},focus_handler_1=()=>{},focus_handler_2=()=>{},focus_handler_3=()=>{};function instance($$self,$$props,$$invalidate){let focus_topk_tokens,focus_bottomk_tokens,activation_text,{tokens}=$$props,{obj_type}=$$props,{layer_labels}=$$props,{obj_labels}=$$props,{topk_vals}=$$props,{topk_inds}=$$props,{bottomk_vals}=$$props,{bottomk_inds}=$$props,{filter}=$$props,{act_val="0.0"}=$$props,{focus_layer=0}=$$props,{focus_obj}=$$props;function onOver(item){$$invalidate(17,act_val=item)}function onLeave(item){$$invalidate(17,act_val="0.0")}const clamp=num=>Math.min(Math.max(num,0),1);return $$self.$$set=$$props=>{"tokens"in $$props&&$$invalidate(3,tokens=$$props.tokens),"obj_type"in $$props&&$$invalidate(4,obj_type=$$props.obj_type),"layer_labels"in $$props&&$$invalidate(5,layer_labels=$$props.layer_labels),"obj_labels"in $$props&&$$invalidate(6,obj_labels=$$props.obj_labels),"topk_vals"in $$props&&$$invalidate(7,topk_vals=$$props.topk_vals),"topk_inds"in $$props&&$$invalidate(8,topk_inds=$$props.topk_inds),"bottomk_vals"in $$props&&$$invalidate(9,bottomk_vals=$$props.bottomk_vals),"bottomk_inds"in $$props&&$$invalidate(10,bottomk_inds=$$props.bottomk_inds),"filter"in $$props&&$$invalidate(2,filter=$$props.filter),"act_val"in $$props&&$$invalidate(17,act_val=$$props.act_val),"focus_layer"in $$props&&$$invalidate(0,focus_layer=$$props.focus_layer),"focus_obj"in $$props&&$$invalidate(1,focus_obj=$$props.focus_obj)},$$self.$$.update=()=>{267&$$self.$$.dirty[0]&&$$invalidate(11,focus_topk_tokens=idx_into_arr_from_ndarray_slice(tokens,topk_inds.pick(null,focus_layer,focus_obj))),1035&$$self.$$.dirty[0]&&$$invalidate(12,focus_bottomk_tokens=idx_into_arr_from_ndarray_slice(tokens,bottomk_inds.pick(null,focus_layer,focus_obj))),131072&$$self.$$.dirty[0]&&$$invalidate(13,activation_text="Value: "+act_val)},[focus_layer,focus_obj,filter,tokens,obj_type,layer_labels,obj_labels,topk_vals,topk_inds,bottomk_vals,bottomk_inds,focus_topk_tokens,focus_bottomk_tokens,activation_text,onOver,onLeave,function toColor(val){return parseInt(255*clamp(val)),function rgbToHex(r,g,b){return"#"+componentToHex(r)+componentToHex(g)+componentToHex(b)}(255,255-parseInt(255*clamp(val)),255-parseInt(255*clamp(val)))},act_val,function select0_change_handler(){focus_layer=select_value(this),$$invalidate(0,focus_layer)},function select1_change_handler(){focus_obj=select_value(this),$$invalidate(1,focus_obj)},function select2_change_handler(){filter=select_value(this),$$invalidate(2,filter)},tok_i=>{onOver(Number(topk_vals.get(tok_i,focus_layer,focus_obj)).toFixed(2))},tok=>{onLeave()},tok_i=>{onOver(Number(bottomk_vals.get(tok_i,focus_layer,focus_obj)).toFixed(2))},tok=>{onLeave()},(tok_i,dir_j)=>{onOver(Number(topk_vals.get(tok_i,focus_layer,dir_j)).toFixed(2))},tok=>{onLeave()},(tok_i,dir_j)=>{onOver(Number(bottomk_vals.get(tok_i,focus_layer,dir_j)).toFixed(2))},tok=>{onLeave()}]}const TopKTable_svelte=class TopKTable extends SvelteComponent{constructor(options){super(),document.getElementById("svelte-tabow6-style")||function add_css(){var style=internal_element("style");style.id="svelte-tabow6-style",style.textContent=".title.svelte-tabow6.svelte-tabow6{margin-top:5px;font-weight:bold;font-size:15px}.token.svelte-tabow6.svelte-tabow6{color:black;overflow:hidden}.ellipsis.svelte-tabow6.svelte-tabow6{color:black;overflow:hidden}.tokens.svelte-tabow6.svelte-tabow6{border-collapse:collapse;margin:25px 0;font-size:0.9em;font-family:sans-serif;min-width:100px;text-align:center;box-shadow:0 0 20px rgba(0, 0, 0, 0.15)}table.svelte-tabow6 tr td.svelte-tabow6{opacity:0.9}table.svelte-tabow6 tr td.token.svelte-tabow6:hover{outline:1px solid #000}",append(document.head,style)}(),init(this,options,instance,create_fragment,safe_not_equal,{tokens:3,obj_type:4,layer_labels:5,obj_labels:6,topk_vals:7,topk_inds:8,bottomk_vals:9,bottomk_inds:10,filter:2,act_val:17,focus_layer:0,focus_obj:1},[-1,-1])}}}},__webpack_module_cache__={};function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId])return __webpack_module_cache__[moduleId].exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}return __webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__(590)})().default;</script>
            
        </head>
        <body>


            
        <div id="TopKTable_5d4ee4b"></div>
        <script>
        ( () => {
            var data = {
"tokens": [
"bthigh",
"bshin",
"bfoot",
"fthigh",
"fshin",
"ffoot"
],
"obj_type": "SVD direction",
"layer_labels": [
2
],
"obj_labels": [
"0",
"1",
"2",
"3",
"4",
"5",
"6"
],
"topk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa4j135NmVT9739a8sHw0xOSd72Iqs0Lnqhopm7vULw/h1HuuoN6ooIui6W33cXsdkEJK2F1Ac3ZRsH8s+ST2Z31nYTjRKUU2zlKxMuYZkqwcaozTpNlYAAAcwo4Mw==",
"min": 0.01022668369114399,
"max": 0.6582762598991394
},
"topk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAS4GhhkzU9OMjGfMBOHUNAaG02dS00C0kfHpM//+Q2ROn4HxGRhAOv79//c/NW3GzNNnQGIglpExAwNE9PQZAIm6RVE=",
"min": 0.0,
"max": 5.0
},
"bottomk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa4j135NmVT9739a8sHw0xOSd72Iqs0Lnqhopm7vULw/h1HuuoN6ooIui6W33cXsdkEJK2F1Ac3ZRsH8s+ST2Z31nYTjRKUU2zlKxMuYZkqwcaozTpNlYAAAcwo4Mw==",
"min": 0.01022668369114399,
"max": 0.6582762598991394
},
"bottomk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAS4GhhkzU9OMjGfMBOHUNAaG02dS00C0kfHpM//+Q2ROn4HxGRhAOv79//c/NW3GzNNnQGIglpExAwNE9PQZAIm6RVE=",
"min": 0.0,
"max": 5.0
},
"filter": "topk"
};
            data = loader.unpack_obj(data);
            window.TopKTable_data = data;
            var TopKTable_inst = new TopKTable({
                "target": document.getElementById("TopKTable_5d4ee4b"),
                "props": data
                });
        })();
        </script>
    </body>
</html>

## SVD for the State Input

In the original publication by Conjecture, they only looked at the output embedding for tokens, even though there seems to be no reason not to also look at the input embeddings. This way it could be possible to trace where information may be first processed. 

### K Weights in the First Block
<html>
<div id="TopKTable_4236255">
        <script>
        ( () => {
            var data = {
"tokens": [
"bodyz",
"bodyy",
"bthigh",
"bshin",
"bfoot",
"fthigh",
"fshin",
"ffoot",
"bodyx velo",
"bodyz velo",
"bodyy velo",
"bthigh av",
"bshin av",
"bfoot av",
"fthigh av",
"fshin av",
"ffoot av"
],
"obj_type": "SVD direction",
"layer_labels": [
0
],
"obj_labels": [
"0",
"1",
"2",
"3",
"4",
"5",
"6"
],
"topk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa5//9kXSzzUarpwWfXGnBVVDjIpatskSwN7vi17Mj1a19Uxbm2ppV+FadKjqArNNOntS1J08qOnGMiqqvBocE3LkJC9HMRhsFaQlYuB4Uroa0kb8/Nah5kBppE8wQ==",
"min": 0.12013614177703857,
"max": 0.7604396939277649
},
"topk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa7//v/v/1//f/9/+f/8DAz/3wP58//Xg3E/kHz/n/+//v94oBp5IA1SZw9Vbw+U1wfKQ9SuB6qpB+oHmvPvPwCSOViN",
"min": 0.0,
"max": 16.0
},
"bottomk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAS4n2zCff//nJmd8OnEpIP2BVZOj92TlyJS9DFsPpETpTbVdmK5v82B3qb1pgJ34G8GdSautrqw8ajTHRpZruuBBww4LhYWr9GcoMzBwMwuzrmA/5LVPuUYMAMmIPgE=",
"min": 0.004976500291377306,
"max": 0.11482589691877365
},
"bottomk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa5//xkY/r//3w+E+v/9/+f/3//vP5B8/z8exP5fDyTvg2Xug9nxYHGgPFCXPRCvB0J7oNh5oJrz/88D9QJZAKCqWI0=",
"min": 0.0,
"max": 16.0
},
"filter": "topk"
};
            data = loader.unpack_obj(data);
            window.TopKTable_data = data;
            var TopKTable_inst = new TopKTable({
                "target": document.getElementById("TopKTable_4236255"),
                "props": data
                });
        })();
</script>
</div>
</html>
### OV-Circuit Weights in the First Block
<html>
<div id="TopKTable_3aa20ac">
        <script>
        ( () => {
            var data = {
"tokens": [
"bodyz",
"bodyy",
"bthigh",
"bshin",
"bfoot",
"fthigh",
"fshin",
"ffoot",
"bodyx velo",
"bodyz velo",
"bodyy velo",
"bthigh av",
"bshin av",
"bfoot av",
"fthigh av",
"fshin av",
"ffoot av"
],
"obj_type": "SVD direction",
"layer_labels": [
0
],
"obj_labels": [
"0",
"1",
"2",
"3",
"4",
"5",
"6"
],
"topk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa5V77YmPwjncvJz/Pf/ZPTLmI8ekww3WE2x8Sh1MX6p7e26R+O5ZaZNUpCpkT93nKWQ/DO128a3Au/pPWIrNF8hvFGV2eCRwnVdBoZ8FRmB7SJp2q/l3mkBAL/2PiE=",
"min": 0.03522849082946777,
"max": 0.4282677173614502
},
"topk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa5tube2MTBMUtmWuy1XxXPikq1vt+UyAIGKZ250zm2PSVvfbn07SQUkv/Vtzm0Vz9tmnkJb33oKeUxiYMiN9ph02+zf/0kqt7Zty524ZFvuv/8ek/7XAwDtUUU8",
"min": 2.0,
"max": 16.0
},
"bottomk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa43rX//h90TeKedrX1Y/bdnC/ct4wMzz7KkM24WPSOSWnikadcfgxTriUtnzjwZZ1scv3O/3jz5WbWf46zMcjNnrXwl/1diuueCIF9xnrC3EQwM0sxvbKSCAHQCQkI=",
"min": 0.0003347641322761774,
"max": 0.03654595836997032
},
"bottomk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa7/8f/P/+8H4vn//f+//8//v5+B4d////uBIueBdD5QNB4I5f+vZ2AAy+SD4Xwgjv+v/389UN36//eB8vZA2A9m7wcAk4RYjQ==",
"min": 0.0,
"max": 16.0
},
"filter": "topk"
};
            data = loader.unpack_obj(data);
            window.TopKTable_data = data;
            var TopKTable_inst = new TopKTable({
                "target": document.getElementById("TopKTable_3aa20ac"),
                "props": data
                });
        })();
        </script>
    </div>
</html>

## Reward Embedding

The strongest signal for the input reward embedding can be found in the V weights of the second transformer block. The cosine similarity is only 0.24 which is still more than one would expect randomly for length 128 embedding vector.

<html>
<div id="TopKTable_3a72c2f"></div>
        <script>
        ( () => {
            var data = {
"tokens": [
"reward"
],
"obj_type": "SVD direction",
"layer_labels": [
1
],
"obj_labels": [
"0",
"1",
"2",
"3",
"4",
"5",
"6"
],
"topk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RqGOgpAZK6po1CrQB7gqnJhYPj3fzaLFN+P1HZHAA3eIUA=",
"min": 0.025530628859996796,
"max": 0.23870688676834106
},
"topk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RqGOgpAZK6po1CrQB7gYkABAOSYG5k=",
"min": 0.0,
"max": 0.0
},
"bottomk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RqGOgpAZK6po1CrQB7gqnJhYPj3fzaLFN+P1HZHAA3eIUA=",
"min": 0.025530628859996796,
"max": 0.23870688676834106
},
"bottomk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RqGOgpAZK6po1CrQB7gYkABAOSYG5k=",
"min": 0.0,
"max": 0.0
},
"filter": "topk"
};
            data = loader.unpack_obj(data);
            window.TopKTable_data = data;
            var TopKTable_inst = new TopKTable({
                "target": document.getElementById("TopKTable_3a72c2f"),
                "props": data
                });
        })();
        </script>
</html>

## Time Embedding

It was pretty unclear what the plots for the timestep embedding meant, it did appear that the V weights of the MLP in the first transfomer block showed reaction to the embedding. In general this task probably does not really require knowledge of the time to be successfully completed. That could explaing why there doesn't seem to be any structure to this.

<html>
<div id="TopKTable_5710075"></div>
<script>
        ( () => {
            var data = {
"tokens": [
"tim 0",
"tim 1",
"tim 2",
"tim 3",
"tim 4",
"tim 5",
"tim 6",
"tim 7",
"tim 8",
"tim 9",
"tim 10",
"tim 11",
"tim 12",
"tim 13",
"tim 14",
"tim 15",
"tim 16",
"tim 17",
"tim 18",
"tim 19",
"tim 20",
"tim 21",
"tim 22",
"tim 23",
"tim 24",
"tim 25",
"tim 26",
"tim 27",
"tim 28",
"tim 29",
"tim 30",
"tim 31",
"tim 32",
"tim 33",
"tim 34",
"tim 35",
"tim 36",
"tim 37",
"tim 38",
"tim 39",
"tim 40",
"tim 41",
"tim 42",
"tim 43",
"tim 44",
"tim 45",
"tim 46",
"tim 47",
"tim 48",
"tim 49",
"tim 50",
"tim 51",
"tim 52",
"tim 53",
"tim 54",
"tim 55",
"tim 56",
"tim 57",
"tim 58",
"tim 59",
"tim 60",
"tim 61",
"tim 62",
"tim 63",
"tim 64",
"tim 65",
"tim 66",
"tim 67",
"tim 68",
"tim 69",
"tim 70",
"tim 71",
"tim 72",
"tim 73",
"tim 74",
"tim 75",
"tim 76",
"tim 77",
"tim 78",
"tim 79",
"tim 80",
"tim 81",
"tim 82",
"tim 83",
"tim 84",
"tim 85",
"tim 86",
"tim 87",
"tim 88",
"tim 89",
"tim 90",
"tim 91",
"tim 92",
"tim 93",
"tim 94",
"tim 95",
"tim 96",
"tim 97",
"tim 98",
"tim 99",
"tim 100",
"tim 101",
"tim 102",
"tim 103",
"tim 104",
"tim 105",
"tim 106",
"tim 107",
"tim 108",
"tim 109",
"tim 110",
"tim 111",
"tim 112",
"tim 113",
"tim 114",
"tim 115",
"tim 116",
"tim 117",
"tim 118",
"tim 119",
"tim 120",
"tim 121",
"tim 122",
"tim 123",
"tim 124",
"tim 125",
"tim 126",
"tim 127",
"tim 128",
"tim 129",
"tim 130",
"tim 131",
"tim 132",
"tim 133",
"tim 134",
"tim 135",
"tim 136",
"tim 137",
"tim 138",
"tim 139",
"tim 140",
"tim 141",
"tim 142",
"tim 143",
"tim 144",
"tim 145",
"tim 146",
"tim 147",
"tim 148",
"tim 149",
"tim 150",
"tim 151",
"tim 152",
"tim 153",
"tim 154",
"tim 155",
"tim 156",
"tim 157",
"tim 158",
"tim 159",
"tim 160",
"tim 161",
"tim 162",
"tim 163",
"tim 164",
"tim 165",
"tim 166",
"tim 167",
"tim 168",
"tim 169",
"tim 170",
"tim 171",
"tim 172",
"tim 173",
"tim 174",
"tim 175",
"tim 176",
"tim 177",
"tim 178",
"tim 179",
"tim 180",
"tim 181",
"tim 182",
"tim 183",
"tim 184",
"tim 185",
"tim 186",
"tim 187",
"tim 188",
"tim 189",
"tim 190",
"tim 191",
"tim 192",
"tim 193",
"tim 194",
"tim 195",
"tim 196",
"tim 197",
"tim 198",
"tim 199",
"tim 200",
"tim 201",
"tim 202",
"tim 203",
"tim 204",
"tim 205",
"tim 206",
"tim 207",
"tim 208",
"tim 209",
"tim 210",
"tim 211",
"tim 212",
"tim 213",
"tim 214",
"tim 215",
"tim 216",
"tim 217",
"tim 218",
"tim 219",
"tim 220",
"tim 221",
"tim 222",
"tim 223",
"tim 224",
"tim 225",
"tim 226",
"tim 227",
"tim 228",
"tim 229",
"tim 230",
"tim 231",
"tim 232",
"tim 233",
"tim 234",
"tim 235",
"tim 236",
"tim 237",
"tim 238",
"tim 239",
"tim 240",
"tim 241",
"tim 242",
"tim 243",
"tim 244",
"tim 245",
"tim 246",
"tim 247",
"tim 248",
"tim 249",
"tim 250",
"tim 251",
"tim 252",
"tim 253",
"tim 254",
"tim 255",
"tim 256",
"tim 257",
"tim 258",
"tim 259",
"tim 260",
"tim 261",
"tim 262",
"tim 263",
"tim 264",
"tim 265",
"tim 266",
"tim 267",
"tim 268",
"tim 269",
"tim 270",
"tim 271",
"tim 272",
"tim 273",
"tim 274",
"tim 275",
"tim 276",
"tim 277",
"tim 278",
"tim 279",
"tim 280",
"tim 281",
"tim 282",
"tim 283",
"tim 284",
"tim 285",
"tim 286",
"tim 287",
"tim 288",
"tim 289",
"tim 290",
"tim 291",
"tim 292",
"tim 293",
"tim 294",
"tim 295",
"tim 296",
"tim 297",
"tim 298",
"tim 299",
"tim 300",
"tim 301",
"tim 302",
"tim 303",
"tim 304",
"tim 305",
"tim 306",
"tim 307",
"tim 308",
"tim 309",
"tim 310",
"tim 311",
"tim 312",
"tim 313",
"tim 314",
"tim 315",
"tim 316",
"tim 317",
"tim 318",
"tim 319",
"tim 320",
"tim 321",
"tim 322",
"tim 323",
"tim 324",
"tim 325",
"tim 326",
"tim 327",
"tim 328",
"tim 329",
"tim 330",
"tim 331",
"tim 332",
"tim 333",
"tim 334",
"tim 335",
"tim 336",
"tim 337",
"tim 338",
"tim 339",
"tim 340",
"tim 341",
"tim 342",
"tim 343",
"tim 344",
"tim 345",
"tim 346",
"tim 347",
"tim 348",
"tim 349",
"tim 350",
"tim 351",
"tim 352",
"tim 353",
"tim 354",
"tim 355",
"tim 356",
"tim 357",
"tim 358",
"tim 359",
"tim 360",
"tim 361",
"tim 362",
"tim 363",
"tim 364",
"tim 365",
"tim 366",
"tim 367",
"tim 368",
"tim 369",
"tim 370",
"tim 371",
"tim 372",
"tim 373",
"tim 374",
"tim 375",
"tim 376",
"tim 377",
"tim 378",
"tim 379",
"tim 380",
"tim 381",
"tim 382",
"tim 383",
"tim 384",
"tim 385",
"tim 386",
"tim 387",
"tim 388",
"tim 389",
"tim 390",
"tim 391",
"tim 392",
"tim 393",
"tim 394",
"tim 395",
"tim 396",
"tim 397",
"tim 398",
"tim 399",
"tim 400",
"tim 401",
"tim 402",
"tim 403",
"tim 404",
"tim 405",
"tim 406",
"tim 407",
"tim 408",
"tim 409",
"tim 410",
"tim 411",
"tim 412",
"tim 413",
"tim 414",
"tim 415",
"tim 416",
"tim 417",
"tim 418",
"tim 419",
"tim 420",
"tim 421",
"tim 422",
"tim 423",
"tim 424",
"tim 425",
"tim 426",
"tim 427",
"tim 428",
"tim 429",
"tim 430",
"tim 431",
"tim 432",
"tim 433",
"tim 434",
"tim 435",
"tim 436",
"tim 437",
"tim 438",
"tim 439",
"tim 440",
"tim 441",
"tim 442",
"tim 443",
"tim 444",
"tim 445",
"tim 446",
"tim 447",
"tim 448",
"tim 449",
"tim 450",
"tim 451",
"tim 452",
"tim 453",
"tim 454",
"tim 455",
"tim 456",
"tim 457",
"tim 458",
"tim 459",
"tim 460",
"tim 461",
"tim 462",
"tim 463",
"tim 464",
"tim 465",
"tim 466",
"tim 467",
"tim 468",
"tim 469",
"tim 470",
"tim 471",
"tim 472",
"tim 473",
"tim 474",
"tim 475",
"tim 476",
"tim 477",
"tim 478",
"tim 479",
"tim 480",
"tim 481",
"tim 482",
"tim 483",
"tim 484",
"tim 485",
"tim 486",
"tim 487",
"tim 488",
"tim 489",
"tim 490",
"tim 491",
"tim 492",
"tim 493",
"tim 494",
"tim 495",
"tim 496",
"tim 497",
"tim 498",
"tim 499",
"tim 500",
"tim 501",
"tim 502",
"tim 503",
"tim 504",
"tim 505",
"tim 506",
"tim 507",
"tim 508",
"tim 509",
"tim 510",
"tim 511",
"tim 512",
"tim 513",
"tim 514",
"tim 515",
"tim 516",
"tim 517",
"tim 518",
"tim 519",
"tim 520",
"tim 521",
"tim 522",
"tim 523",
"tim 524",
"tim 525",
"tim 526",
"tim 527",
"tim 528",
"tim 529",
"tim 530",
"tim 531",
"tim 532",
"tim 533",
"tim 534",
"tim 535",
"tim 536",
"tim 537",
"tim 538",
"tim 539",
"tim 540",
"tim 541",
"tim 542",
"tim 543",
"tim 544",
"tim 545",
"tim 546",
"tim 547",
"tim 548",
"tim 549",
"tim 550",
"tim 551",
"tim 552",
"tim 553",
"tim 554",
"tim 555",
"tim 556",
"tim 557",
"tim 558",
"tim 559",
"tim 560",
"tim 561",
"tim 562",
"tim 563",
"tim 564",
"tim 565",
"tim 566",
"tim 567",
"tim 568",
"tim 569",
"tim 570",
"tim 571",
"tim 572",
"tim 573",
"tim 574",
"tim 575",
"tim 576",
"tim 577",
"tim 578",
"tim 579",
"tim 580",
"tim 581",
"tim 582",
"tim 583",
"tim 584",
"tim 585",
"tim 586",
"tim 587",
"tim 588",
"tim 589",
"tim 590",
"tim 591",
"tim 592",
"tim 593",
"tim 594",
"tim 595",
"tim 596",
"tim 597",
"tim 598",
"tim 599",
"tim 600",
"tim 601",
"tim 602",
"tim 603",
"tim 604",
"tim 605",
"tim 606",
"tim 607",
"tim 608",
"tim 609",
"tim 610",
"tim 611",
"tim 612",
"tim 613",
"tim 614",
"tim 615",
"tim 616",
"tim 617",
"tim 618",
"tim 619",
"tim 620",
"tim 621",
"tim 622",
"tim 623",
"tim 624",
"tim 625",
"tim 626",
"tim 627",
"tim 628",
"tim 629",
"tim 630",
"tim 631",
"tim 632",
"tim 633",
"tim 634",
"tim 635",
"tim 636",
"tim 637",
"tim 638",
"tim 639",
"tim 640",
"tim 641",
"tim 642",
"tim 643",
"tim 644",
"tim 645",
"tim 646",
"tim 647",
"tim 648",
"tim 649",
"tim 650",
"tim 651",
"tim 652",
"tim 653",
"tim 654",
"tim 655",
"tim 656",
"tim 657",
"tim 658",
"tim 659",
"tim 660",
"tim 661",
"tim 662",
"tim 663",
"tim 664",
"tim 665",
"tim 666",
"tim 667",
"tim 668",
"tim 669",
"tim 670",
"tim 671",
"tim 672",
"tim 673",
"tim 674",
"tim 675",
"tim 676",
"tim 677",
"tim 678",
"tim 679",
"tim 680",
"tim 681",
"tim 682",
"tim 683",
"tim 684",
"tim 685",
"tim 686",
"tim 687",
"tim 688",
"tim 689",
"tim 690",
"tim 691",
"tim 692",
"tim 693",
"tim 694",
"tim 695",
"tim 696",
"tim 697",
"tim 698",
"tim 699",
"tim 700",
"tim 701",
"tim 702",
"tim 703",
"tim 704",
"tim 705",
"tim 706",
"tim 707",
"tim 708",
"tim 709",
"tim 710",
"tim 711",
"tim 712",
"tim 713",
"tim 714",
"tim 715",
"tim 716",
"tim 717",
"tim 718",
"tim 719",
"tim 720",
"tim 721",
"tim 722",
"tim 723",
"tim 724",
"tim 725",
"tim 726",
"tim 727",
"tim 728",
"tim 729",
"tim 730",
"tim 731",
"tim 732",
"tim 733",
"tim 734",
"tim 735",
"tim 736",
"tim 737",
"tim 738",
"tim 739",
"tim 740",
"tim 741",
"tim 742",
"tim 743",
"tim 744",
"tim 745",
"tim 746",
"tim 747",
"tim 748",
"tim 749",
"tim 750",
"tim 751",
"tim 752",
"tim 753",
"tim 754",
"tim 755",
"tim 756",
"tim 757",
"tim 758",
"tim 759",
"tim 760",
"tim 761",
"tim 762",
"tim 763",
"tim 764",
"tim 765",
"tim 766",
"tim 767",
"tim 768",
"tim 769",
"tim 770",
"tim 771",
"tim 772",
"tim 773",
"tim 774",
"tim 775",
"tim 776",
"tim 777",
"tim 778",
"tim 779",
"tim 780",
"tim 781",
"tim 782",
"tim 783",
"tim 784",
"tim 785",
"tim 786",
"tim 787",
"tim 788",
"tim 789",
"tim 790",
"tim 791",
"tim 792",
"tim 793",
"tim 794",
"tim 795",
"tim 796",
"tim 797",
"tim 798",
"tim 799",
"tim 800",
"tim 801",
"tim 802",
"tim 803",
"tim 804",
"tim 805",
"tim 806",
"tim 807",
"tim 808",
"tim 809",
"tim 810",
"tim 811",
"tim 812",
"tim 813",
"tim 814",
"tim 815",
"tim 816",
"tim 817",
"tim 818",
"tim 819",
"tim 820",
"tim 821",
"tim 822",
"tim 823",
"tim 824",
"tim 825",
"tim 826",
"tim 827",
"tim 828",
"tim 829",
"tim 830",
"tim 831",
"tim 832",
"tim 833",
"tim 834",
"tim 835",
"tim 836",
"tim 837",
"tim 838",
"tim 839",
"tim 840",
"tim 841",
"tim 842",
"tim 843",
"tim 844",
"tim 845",
"tim 846",
"tim 847",
"tim 848",
"tim 849",
"tim 850",
"tim 851",
"tim 852",
"tim 853",
"tim 854",
"tim 855",
"tim 856",
"tim 857",
"tim 858",
"tim 859",
"tim 860",
"tim 861",
"tim 862",
"tim 863",
"tim 864",
"tim 865",
"tim 866",
"tim 867",
"tim 868",
"tim 869",
"tim 870",
"tim 871",
"tim 872",
"tim 873",
"tim 874",
"tim 875",
"tim 876",
"tim 877",
"tim 878",
"tim 879",
"tim 880",
"tim 881",
"tim 882",
"tim 883",
"tim 884",
"tim 885",
"tim 886",
"tim 887",
"tim 888",
"tim 889",
"tim 890",
"tim 891",
"tim 892",
"tim 893",
"tim 894",
"tim 895",
"tim 896",
"tim 897",
"tim 898",
"tim 899",
"tim 900",
"tim 901",
"tim 902",
"tim 903",
"tim 904",
"tim 905",
"tim 906",
"tim 907",
"tim 908",
"tim 909",
"tim 910",
"tim 911",
"tim 912",
"tim 913",
"tim 914",
"tim 915",
"tim 916",
"tim 917",
"tim 918",
"tim 919",
"tim 920",
"tim 921",
"tim 922",
"tim 923",
"tim 924",
"tim 925",
"tim 926",
"tim 927",
"tim 928",
"tim 929",
"tim 930",
"tim 931",
"tim 932",
"tim 933",
"tim 934",
"tim 935",
"tim 936",
"tim 937",
"tim 938",
"tim 939",
"tim 940",
"tim 941",
"tim 942",
"tim 943",
"tim 944",
"tim 945",
"tim 946",
"tim 947",
"tim 948",
"tim 949",
"tim 950",
"tim 951",
"tim 952",
"tim 953",
"tim 954",
"tim 955",
"tim 956",
"tim 957",
"tim 958",
"tim 959",
"tim 960",
"tim 961",
"tim 962",
"tim 963",
"tim 964",
"tim 965",
"tim 966",
"tim 967",
"tim 968",
"tim 969",
"tim 970",
"tim 971",
"tim 972",
"tim 973",
"tim 974",
"tim 975",
"tim 976",
"tim 977",
"tim 978",
"tim 979",
"tim 980",
"tim 981",
"tim 982",
"tim 983",
"tim 984",
"tim 985",
"tim 986",
"tim 987",
"tim 988",
"tim 989",
"tim 990",
"tim 991",
"tim 992",
"tim 993",
"tim 994",
"tim 995",
"tim 996",
"tim 997",
"tim 998",
"tim 999"
],
"obj_type": "SVD direction",
"layer_labels": [
0
],
"obj_labels": [
"0",
"1",
"2",
"3",
"4",
"5",
"6"
],
"topk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa5//78WvzQxchC1fqSyN787cknQK9U+cwv17crVjh6mWv6pKpMNeRU8JWusrhv+sngs4qp2Q1JH+JbyVx0LsU8sHxR3iwSytAjJ830WnsboJ79BmIHhnSAAPxE7MQ==",
"min": 0.23680797219276428,
"max": 0.37061893939971924
},
"topk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa52C46/B+K2lTEwXK5Oenl8m4rjk0OFZQKhFiah7uuNWwtuz57gNZlF5N77xbE15/hkpGz2uvycGbrhd7s953u5Y//+a27V3DqZO8EskWdb/mk3KduepSZzAfuIQqg=",
"min": 15.0,
"max": 966.0
},
"bottomk_vals": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAa6GlG/1R1ce/L87Qfym36rkOJ2a/3O33VvjLb2mt3u2Y2VaaW72oVkKEqvOZh7QbfHzyZaKWSs2f9p0ny2ahnJXPK2N2xjmT1qtryuynP0xW4cIA4MXg74uAHqSQDw=",
"min": 1.0135583579540253e-05,
"max": 0.0010772179812192917
},
"bottomk_inds": {
"__type__": "npy",
"zdata": "eJyb7BfqGxDJyFDGUK2eklqcXKRupaBuU2qkrqOgnpZfVFKUmBefX5SSChJ3S8wpTgWKF2ckFqQC+RpmOgqGOgrmmjoKtQrkAS7llR4XJnao5E48c6vvf3Zu4P/WW1/+q25TniTwf6pKam70xFse7yZG5a7PDfdYty1y297/kTmv//332HGrZ+Kd3PhtvJPUcvs9Figv3bbSo+u23a05E58wMAAAM4FJeg==",
"min": 69.0,
"max": 965.0
},
"filter": "topk"
};
            data = loader.unpack_obj(data);
            window.TopKTable_data = data;
            var TopKTable_inst = new TopKTable({
                "target": document.getElementById("TopKTable_5710075"),
                "props": data
                });
        })();
</script>
</html>

## SVD on larger models like GPTJ-6b

I also tried to apply the SVD method to larger models like gptj-6b both before and after finetuning. [Here is a notebook in the repo](https://github.com/DalasNoin/SVDInterpretTransformer/blob/main/svd_directions/gptj-6b.ipynb). While Conjecture used SVD on a gpt2-sized model in the original post, it appears that the SVD technique works significantly worse with larger models. I believe one of the reasons if the increased residual embeddings size of the tokens from 1024 to 4096 from gpt2 to gptj, making it significantly harder to achieve a high cosine similarity between two vectors.

## Code

The code for this study can be found on my [github](https://github.com/dalasnoin/SVDInterpretTransformer). There is also a [colab notebook](https://colab.research.google.com/drive/1GkFbFe8js9OQTrw_Vux6xyDMnc0OZ7fU) I created to show the effects of changing singular values.

## Future Work

- Pin down what these values actually mean and how it could be used to locate and edit knowledge or capabilities. 
- Editing the weight matrixes can be used to further explore where certain capabilities are residing in a model. I.e. If you predict that this part 
- Discrete actionspace will make it easier to see such effects, I am working on getting such a model


